<!-- Snippet: ayuda/menú rápido para TV (pégalo tras <div id="root"></div>) -->
<style>
  .tv-help {
    position: fixed;
    left: 50%;
    top: calc(var(--tv-top-offset, 9cm) + 10px);
    transform: translateX(-50%);
    background: rgba(0,0,0,0.7);
    color: #fff;
    padding: 12px 18px;
    border-radius: 10px;
    font-size: 0.95rem;
    z-index: 9999;
    max-width: 90%;
    backdrop-filter: blur(4px);
    box-shadow: 0 8px 30px rgba(0,0,0,0.5);
  }
  .tv-help p { margin: 0.2rem 0; }
  .tv-help .muted { opacity: 0.85; font-size: 0.9rem; }
  .tv-help .close-btn {
    display:inline-block;margin-left:12px;padding:6px 10px;border-radius:6px;background:#fff;color:#123;border:none;cursor:pointer;font-weight:700;
  }
  @media (min-width:1600px) { .tv-help { font-size:1.05rem; } }
</style>

<div id="tvHelp" class="tv-help" role="dialog" aria-live="polite" aria-labelledby="tvHelpTitle">
  <strong id="tvHelpTitle">Ayuda rápida</strong>
  <p class="muted">Flechas ↑/↓ mover contenido • + / - cambiar tamaño texto • ? parámetros: ?offset=8.5cm&scale=1.25</p>
  <p style="margin-top:6px">Pulsa <button class="close-btn" id="tvHelpClose">OK</button> para ocultar</p>
</div>

<script>
  (function(){
    const help = document.getElementById('tvHelp');
    const btn = document.getElementById('tvHelpClose');
    // Mostrar solo la primera vez en esta sesión (sessionStorage)
    if (sessionStorage.getItem('tvHelpDismissed')) {
      help.style.display = 'none';
    } else {
      help.style.display = 'block';
    }
    function dismiss(){
      help.style.display = 'none';
      sessionStorage.setItem('tvHelpDismissed','1');
    }
    btn.addEventListener('click', dismiss);
    // Mismo cierre con tecla M o Escape
    window.addEventListener('keydown', function(e){
      if (e.key === 'm' || e.key === 'M' || e.key === 'Escape' || e.key === '?') dismiss();
    });
    // Ajustar posición si se cambia la variable CSS (por ejemplo al usar flechas)
    const ro = new ResizeObserver(()=> {
      // for simplicity: no-op; the CSS already usa --tv-top-offset
    });
    ro.observe(document.documentElement);
  })();
</script>

